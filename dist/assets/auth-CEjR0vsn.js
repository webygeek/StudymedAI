import{createClient as u}from"https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2/+esm";const c="https://srimyroyqasdgrbmajwk.supabase.co",f="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InNyaW15cm95cWFzZGdyYm1handrIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjMxODU4NDUsImV4cCI6MjA3ODc2MTg0NX0.ydfJwywb94wEMsjS6go9GHkVs_uT8E9jUVIRHObi_Vw",a=u(c,f);async function w(r,t,s,e="student"){const{data:i,error:n}=await a.auth.signUp({email:r,password:t});if(n)throw n;if(i.user){const{error:o}=await a.from("user_profiles").insert({id:i.user.id,email:i.user.email,full_name:s,role:e,has_completed_survey:!1});if(o)throw o}return i}async function p(r,t){const{data:s,error:e}=await a.auth.signInWithPassword({email:r,password:t});if(e)throw e;return s}async function y(){const{data:{user:r}}=await a.auth.getUser();return r}async function h(r){const{data:t,error:s}=await a.from("user_profiles").select("*").eq("id",r).maybeSingle();if(s)throw s;return t}async function d(r,t){const{error:s}=await a.from("user_profiles").update(t).eq("id",r);if(s)throw s}async function l(r,t){const{error:s}=await a.from("student_surveys").insert({user_id:r,...t});if(s)throw s;await d(r,{has_completed_survey:!0})}export{h as a,w as b,l as c,a as d,y as g,p as s};
