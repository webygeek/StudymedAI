import"./modulepreload-polyfill-B5Qt9EMX.js";import{s as h,a as u,b as w,g as v}from"./auth-CEjR0vsn.js";import"https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2/+esm";const d=document.getElementById("loginTab"),i=document.getElementById("signupTab"),l=document.getElementById("loginForm"),r=document.getElementById("signupForm"),t=document.getElementById("errorMessage"),s=document.getElementById("successMessage");async function y(){const e=await v();if(e){const n=await u(e.id);g(n)}}function g(e){e.role==="admin"?window.location.href="admin-dashboard.html":e.has_completed_survey?window.location.href="dashboard.html":window.location.href="survey.html"}d.addEventListener("click",()=>{d.classList.add("bg-white","shadow","text-teal-600"),d.classList.remove("text-gray-600"),i.classList.remove("bg-white","shadow","text-teal-600"),i.classList.add("text-gray-600"),l.classList.remove("hidden"),r.classList.add("hidden")});i.addEventListener("click",()=>{i.classList.add("bg-white","shadow","text-teal-600"),i.classList.remove("text-gray-600"),d.classList.remove("bg-white","shadow","text-teal-600"),d.classList.add("text-gray-600"),r.classList.remove("hidden"),l.classList.add("hidden")});l.addEventListener("submit",async e=>{e.preventDefault(),t.classList.add("hidden"),s.classList.add("hidden");const n=document.getElementById("loginEmail").value,c=document.getElementById("loginPassword").value;try{const{user:a}=await h(n,c),o=await u(a.id);s.textContent="Login successful! Redirecting...",s.classList.remove("hidden"),setTimeout(()=>g(o),1e3)}catch(a){t.textContent=a.message,t.classList.remove("hidden")}});r.addEventListener("submit",async e=>{e.preventDefault(),t.classList.add("hidden"),s.classList.add("hidden");const n=document.getElementById("signupName").value,c=document.getElementById("signupEmail").value,a=document.getElementById("signupPassword").value,o=document.getElementById("signupRole").value;try{const{user:m}=await w(c,a,n,o);s.textContent="Account created successfully! Redirecting...",s.classList.remove("hidden"),setTimeout(()=>{o==="student"?window.location.href="survey.html":window.location.href="admin-dashboard.html"},1e3)}catch(m){t.textContent=m.message,t.classList.remove("hidden")}});y();
