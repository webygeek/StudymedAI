import"./modulepreload-polyfill-B5Qt9EMX.js";import{d as e}from"./auth-CEjR0vsn.js";import"https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2/+esm";document.getElementById("setupBtn").addEventListener("click",async()=>{const o=document.getElementById("progress"),d=document.getElementById("success"),a=document.getElementById("error"),r=document.getElementById("setupBtn");o.classList.remove("hidden"),d.classList.add("hidden"),a.classList.add("hidden"),r.disabled=!0,r.classList.add("opacity-50");try{document.querySelector("#step1 .spinner").classList.remove("hidden");const t=await e.auth.signUp({email:"student@demo.com",password:"demo123456"});if(t.error&&!t.error.message.includes("already registered"))throw new Error("Student account: "+t.error.message);const s=t.data.user?.id;s&&(await e.from("user_profiles").insert({id:s,email:"student@demo.com",full_name:"Demo Student",role:"student",has_completed_survey:!0}),await e.from("student_surveys").insert({user_id:s,exam_type:"neet",target_date:"2025-05-15",study_hours_per_day:6,weak_subjects:["physics","chemistry"],strong_subjects:["biology"],learning_style:"visual"})),document.querySelector("#step1 .spinner").classList.add("hidden"),document.querySelector("#step1 span").innerHTML="✓ Student account created",document.querySelector("#step1").classList.add("bg-green-50"),document.querySelector("#step2 .spinner").classList.remove("hidden");const n=await e.auth.signUp({email:"admin@demo.com",password:"admin123456"});if(n.error&&!n.error.message.includes("already registered"))throw new Error("Admin account: "+n.error.message);const i=n.data.user?.id;i&&await e.from("user_profiles").insert({id:i,email:"admin@demo.com",full_name:"Demo Admin",role:"admin",has_completed_survey:!1}),document.querySelector("#step2 .spinner").classList.add("hidden"),document.querySelector("#step2 span").innerHTML="✓ Admin account created",document.querySelector("#step2").classList.add("bg-green-50"),document.querySelector("#step3 .spinner").classList.remove("hidden"),s&&(await e.from("study_sessions").insert([{user_id:s,subject:"Physics",topic:"Thermodynamics",duration_minutes:45,status:"completed",started_at:new Date(Date.now()-864e5).toISOString(),completed_at:new Date(Date.now()-837e5).toISOString()}]),await e.from("user_library").insert([{user_id:s,item_type:"flashcard",title:"Krebs Cycle",subject:"Biology",content:{question:"What is the Krebs Cycle?",answer:"A series of chemical reactions used by aerobic organisms to generate energy"},tags:["biochemistry","metabolism"]}]),await e.from("study_schedules").insert([{user_id:s,date:new Date(Date.now()+864e5).toISOString().split("T")[0],subject:"Chemistry",topic:"Organic Reactions",start_time:"10:00",end_time:"11:30",status:"upcoming"}])),document.querySelector("#step3 .spinner").classList.add("hidden"),document.querySelector("#step3 span").innerHTML="✓ Sample data added",document.querySelector("#step3").classList.add("bg-green-50"),d.classList.remove("hidden")}catch(t){console.error("Setup error:",t),document.getElementById("errorMessage").textContent=t.message,a.classList.remove("hidden"),r.disabled=!1,r.classList.remove("opacity-50")}});
